{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>The front page</p>"},{"location":"Control-systems/","title":"Index","text":"<p>A control system is used to regulate the behavior of a device or system using control loops. Usually a setpoint is given and the control system will change it's output such that deviation from the setpoint (error) is minimized. [[Tuning]] is used to optimize the speed at which the target is reached.</p> <p>Control systems are sometimes also called servo controller or servo for short. In our lab we use a lot of [[Controller hardware|servo hydraulic controllers]] for force and displacement control in our testing machines.</p>"},{"location":"Control-systems/#open-loop-control","title":"Open loop control","text":"<p>When a control system has no feedback method it is considered open loop. These are also known as feedforward controllers. An example of such a system is a heater that's controlled by a timer. The heater will turn on for a set amount of time, however the temperature of the heater is completely unregulated.</p>"},{"location":"Control-systems/#closed-loop-control","title":"Closed loop control","text":"<p>A system where the output of the process is measured is considered closed loop. Also known as feedback controllers. </p>"},{"location":"Control-systems/Controller%20hardware/","title":"Controller hardware","text":""},{"location":"Control-systems/Controller%20hardware/#control2","title":"Control2","text":"<p>LOOP1-4: 24 V input</p>"},{"location":"Control-systems/Controller%20hardware/#control4","title":"Control4","text":""},{"location":"Control-systems/Controller%20hardware/#control-5","title":"Control 5","text":"<p>Successor to [[#Control2]]</p>"},{"location":"Control-systems/Load%20protect%20vs.%20load%20limit/","title":"Load protect vs. load limit","text":"<p>[!danger] Danger Machines have no brain, always use your own!</p> <p>You might be tempted to use load-protect to make the setup safe to work on while energized. However, you can never trust an energized machine! Always de-energize the setup before working on the specimen!</p> <p>Load protect is a function that will try to limit the force that is produced in the setup. It works in all control paths and internally switches to force-control within 100 us when the load protect value is reached.</p> <p>Load limit is a function that stops force control and quickly (within 100 us) switches to position control whenever a limit value is reached.</p>"},{"location":"Control-systems/Re1/Re1/","title":"Re1","text":"<p>[!warning] Warning</p> <p>Changing settings on Re1 and/or hydraulic control systems in general should only be done by experienced technicians. </p> <p>If you are not sure what you're doing, ask someone who does!</p> <p>[!danger] Danger Machines have no brain, always use your own!</p> <p>Re1 is PC software that's used to send configuration parameters to, and read measurement values from our [[Controller hardware]]. Re1 is written by [[Kees van Beek]].</p>"},{"location":"Control-systems/Re2/Re2%20-%20Controller%20HMI/","title":"Re2   Controller HMI","text":"<p>Re2 is the successor to the [[Re1]] software for managing [[Controller hardware]]. The new version is also written in C++ but the GUI is now done with Dear Imgui instead of the MFC library.</p>"},{"location":"Data-aquisition/","title":"Index","text":"<p>Test of data aquisition</p>"},{"location":"Data-aquisition/Devices/","title":"Index","text":"<p>Many devices use obscure or slightly different methods for communication. Making them talk to our software is something that we often have to figure out in our lab. Here you'll find a collection of device-specific information on data formatting, and connection details.</p>"},{"location":"Data-aquisition/Devices/U1731B/","title":"U1731B","text":"<p>The Agilent U1731B is a handheld LCR meter. It has a optically isolated data interface that we can use to record measurements.</p>"},{"location":"Data-aquisition/Devices/U1731B/#example-data","title":"Example data","text":"<pre><code>432109980000040004000?\n0\u0018\u001c?\n132314965311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311800084000=\n\n132314964311900084000=\n\n132314963311900084000=\n\n132314963311900084000=\n\n132314963311900084000=\n</code></pre> <p>Here the value displayed on the device is '1496,33 uH'.</p> <p>First packet is a bit different from the rest, possibily software version etc. Not yet sure. After that we see a regularly transmitted packet with the measurement value.</p>"},{"location":"Data-aquisition/Devices/U1731B/#decoding","title":"Decoding","text":"<p>Kees van Beek wrote a piece of lua code that is capable of decoding the measurement value from this packet. See <code>AgilentU1731B.lua</code></p> <pre><code>f=string.sub(EStr,5,5)\nFactor=math.pow(10,f)/1000\nv=string.sub(EStr,5,10)\nWaarde=tonumber(v)*Factor\n</code></pre> <p>It seems the packets are delimited with the <code>=</code> symbol.</p> <p>The measured value is decoded in the 5th to the 10th character of each packet.</p>"},{"location":"Data-aquisition/Mp3/LUA%20scripting%20snippets/","title":"LUA scripting snippets","text":""},{"location":"Data-aquisition/Mp3/LUA%20scripting%20snippets/#boilerplate","title":"Boilerplate","text":"<p>Create a new file in the <code>C:\\Mp3Prog\\Control</code> folder and give it a sensible name and the <code>.lua</code> extension. Then copy and paste the boilerplate code from below. <pre><code>local this = debug.getinfo(1).short_src\nb = 1\nwhile b do\n\u00a0 \u00a0 this = string.sub(this, b + 1)\n\u00a0 \u00a0 b = string.find(this, \"\\\\\")\nend\n\nprint(this, \" started\")\n\n-- Your setup code goes here\n\nwhile AllowRunning(this) == 1 do\n\n    -- Your main loop code goes here\n\n\u00a0 \u00a0 yield()\nend\n\nprint(this, \" end\")\n</code></pre> This code gets it's own source filename from Lua's debug library, and prints this to Mp3's [[script output]].</p>"},{"location":"Data-aquisition/Mp3/LUA%20scripting%20snippets/#main-loop","title":"Main loop","text":"<p>What is the reason this exists?</p>"},{"location":"Data-aquisition/Mp3/LUA%20scripting%20snippets/#serial-communication","title":"Serial communication","text":"<p>Often you want to manage a serial device with the script. Pretty much everything is possible to build that way and we've seen some crazy things being done.</p> <p>A serial device doesn't need to be added to the [[devices]] in Mp3, it can be opened from the script like done below. Add this code to your setup. <pre><code>local port = 3 -- COM port number on Windows\nlocal ComIndex = 1 -- local reference to the com-port object (0-5 are available)\n\nComClose(ComIndex) -- Close the port in case it was left open by an aborted script\nComOpen(ComIndex, port, 115200, 8, 0) -- Open the port and connect it to its reference\nComDelimiter(ComIndex, 13) -- Set CR as the end of line character\nComFlush(ComIndex) -- Clear any stale data still left in the buffer\n</code></pre> Lua will read the serial data as a string up to the <code>ComDelimiter()</code>value when running the <code>ComGets()</code> command. <pre><code>EStr, ECnt = ComGets(ComIndex)\nif ECnt &gt; 1 then\n    print(\"ECnt= \",ECnt)\n    print(\"EStr= \",EStr)\nend\n</code></pre> Here <code>EStr</code> is the string and <code>ECnt</code> the number of bytes (characters) received.</p> <p>Sending data to the serial device is simply done with <code>ComPuts()</code>. <pre><code>ComPuts(ComIndex, \"GET\")\n</code></pre> Here the characters <code>GET\\n</code> are sent to the serial device. Note the LF (newline, <code>\\n</code>) that's also transmitted at the end of the string.</p>"},{"location":"Data-aquisition/Mp3/LUA%20scripting%20snippets/#tokenizing","title":"Tokenizing","text":"<p>Sometimes a bunch of data has to be received at once. This data can be formatted sequentially with a separator character in between the data points. Getting this data from the string can be done with the <code>Tokenize()</code> command.</p> <p>In the setup add: <pre><code>local Firstchannel = 20\nlocal Index = 0\n</code></pre> And at the top of the main loop: <pre><code>Tok, Start = Tokenize(EStr, \";\", Start)\nwhile (Start &gt; 0) do\n    --print(\"Tok= \",Tok)\n    --print(\"Start= \",Start)\n    dataval = tonumber(Tok)\n    if (Index &gt;= 0) then\n        ChanPutVal(Firstchannel + Index, dataval)\n        Index = Index + 1\n    end\n    Tok, Start = Tokenize(EStr, \";\", Start)\nend\ndata = 1\n</code></pre> This code reads numbers separated by semicolons and puts them into Mp3 [[channels]] sequentially. A single data frame might look like this. <pre><code>49.19;11.467;1.337\\r\n</code></pre> These 3 numbers are automatically parsed to floats by the <code>tonumber()</code> command.</p>"},{"location":"Data-aquisition/Mp4/Features/","title":"Features","text":"<ul> <li>CANopen</li> </ul>"},{"location":"Data-aquisition/Mp4/Features/#core-functionality","title":"Core functionality","text":"<p>In order of importance, as seen from a users perspective.</p> <p>Data acquisition - Support for multiple Devices, for example:     - NI-DAQmx     - Measurement Computing     - PicoScope     - [[#Generic serial device]]         - Streaming or polling mode     - Teensy RawHID     - Picoscope     - Labjack?     - Sensoray? - Triggered acquisition (previously called buffered I/O)     - Averaging (stacking) - Software signal processing     - IIR - Low pass, High pass, Median etc.     - ETFE - transfer function previewing</p> <p>Measurement channels - Channel settings     - Channel presets (frequently used transducers or clusters of sensors)     - Transducer type (automatically configure units etc.)     - Name     - Conversion factor     - Offset     - Unique identifier of transducer (serial number) - Time base / synchronization</p> <p>Live plotting - Time series data graphs     - Overlay measurement data from previous test     - Overlay fixed reference data - Single value displays (eg. large font) - Bar graph displays (useful for multiple sensor range checking)</p> <p>Storage profiles (acquisition to disk) - For every sample or subsampling (to reduce file size) - Ability to run multiple profiles in parallel - File naming (with numbering, incremental etc.) - Channel selection</p> <p>Datafiles - Compression with LZ4</p> <p>Flexible GUI - Tabs - Windows     - Easily resizable, movable     - Grid snapping/alignment - Preconfigured plots (frequently used)     - \\(y(t)\\)     - \\(y(x)\\)     - Stiffness (\\(F/\\delta\\)), stress-strain (\\(\\sigma/\\epsilon\\)) - Support for multiple monitors</p> <p>Automation tools - Alarms - Triggers - Counters - Markers (text annotation attached to timepoints in time series data) - Stepwise / block based sequence builder</p> <p>Evaluated (derived) time series (transformation and analysis) - For every sample or subsampling (to reduce resource usage) - Expression parser (exprtk) - FFT     - Ring buffer previewing     - Easy setup eg. FFT update rate in 1/s     - Explanation of windowing in tooltips</p>"},{"location":"Data-aquisition/Mp4/Features/#data-acquisition","title":"Data acquisition","text":"<p>The core function of Mp4 is to be able to record measurement samples to disk. Arguably the most important part of that is data acquisition. In Mp3 the bulk of the data acquisition challenge is solved by the NI-DAQmx driver. As it handles the communication with the hardware, sets up the buffers and reads in the data. This will not change for Mp4, however the idea is to make the data acquisition support more [[#Devices|devices]] than just NI-DAQmx.</p> <p>[!quote] Data acquisition is the process of sampling analog-to-digital converters and storing that data to disk.</p> <p>Sample rate Sampling is done at a fixed sample rate. Usually defined by an accurate clock on board of the DAQ device. (Read more about this in chapter [[#Timing]]) This sample rate is important for our digital signal processing. As we want to be able to digitally apply filters onto our measured data. The sample rate must be high enough such that our filters have enough granularity.</p> <p>As a rule of thumb we often use 20x oversampling. For instance, if we want to reproduce a signal of 1 kHz we would need to set our sample rate at 20 kHz.</p> <p>[!info] Often the Nyquist\u2013Shannon sampling theorem is brought up as a means to set the sample rate for a data acquisition system. Where the sample rate is two times the highest frequency to be reproduced out of the data. This is usually not satisfactory because Nyquist assumes signals to be continuous. Which they usually aren't in our applications.</p> <p>Digital signal processing Often our measured data is plagued with noise. 50 Hz interference from our grid-power, mechanical vibration in the measurement setups, resonances and harmonics etc.</p> <p>In order to get rid of these interferences we would like to filter our signals. This can be done in the analog domain using electronic filters like an RC-filter. However this gives us limited flexibility. What if we are not getting a good looking signal our of our transducers and we would like to change the filter constants? We can't easily do that with our analog solution.</p> <p>That's why we decide to oversample during our data acquisition and perform digital signal processing on the samples afterwards.</p> <p> \\ A great implementation of IIR-filters is written by Bernd Porr and published on GitHub. The library is a continuation on ealier work by Vinnie Falco (GitHub). The image above shows an example of EEG data with 50 Hz noise being filtered out effectively and without impacting the signal of interest.</p>"},{"location":"Data-aquisition/Mp4/Features/#devices","title":"Devices","text":""},{"location":"Data-aquisition/Mp4/Features/#generic-serial-device","title":"Generic serial device","text":"<ul> <li>Graciously opening and closing serial devices</li> <li>Advanced parsing of incoming serial messages</li> <li>Transmit packet builder</li> <li>Global actions that can trigger the sending of a transmit packet (for instance when an alarm is triggered, or as a step in the sequence builder)</li> </ul>"},{"location":"Data-aquisition/Mp4/Features/#timing","title":"Timing","text":"<p>In data aquisition, timing is very important. We assume that the interval between our samples is constant because that's what our IIR filters require. </p> <p>Irregularly sampled time series Non-uniformly sampled data will have to be resampled. See also the Lomb\u2013Scargle Periodogram link.</p>"},{"location":"Data-aquisition/Mp4/Features/#frequency-domain-analysis","title":"Frequency domain analysis","text":"<p>Windowing https://download.ni.com/evaluation/pxi/Understanding%20FFTs%20and%20Windowing.pdf</p>"},{"location":"Data-aquisition/Mp4/Dev%20notes/DAQ%20Devices/","title":"DAQ Devices","text":"<p>Example implementation of different DAQ devices: https://github.com/mahilab/mahi-daq</p>"},{"location":"Data-aquisition/Mp4/Dev%20notes/GLFW%20-%20Drag%20and%20drop%20files/","title":"GLFW   Drag and drop files","text":"<pre><code>// code generate by coploit\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;iostream&gt;\n\n// File drop callback function\nvoid drop_callback(GLFWwindow* window, int count, const char** paths) {\n    for (int i = 0; i &lt; count; i++) {\n        std::cout &lt;&lt; \"Dropped file: \" &lt;&lt; paths[i] &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    // Initialize GLFW\n    if (!glfwInit()) {\n        std::cerr &lt;&lt; \"Failed to initialize GLFW\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    // Create a windowed mode window and its OpenGL context\n    GLFWwindow* window = glfwCreateWindow(800, 600, \"GLFW Drag and Drop Example\", NULL, NULL);\n    if (!window) {\n        std::cerr &lt;&lt; \"Failed to create GLFW window\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n\n    // Set the file drop callback\n    glfwSetDropCallback(window, drop_callback);\n\n    // Main loop\n    while (!glfwWindowShouldClose(window)) {\n        // Poll for and process events\n        glfwPollEvents();\n\n        // Rendering code (if any)\n        // ...\n\n        // Swap front and back buffers\n        glfwSwapBuffers(window);\n    }\n\n    // Clean up and exit\n    glfwDestroyWindow(window);\n    glfwTerminate();\n    return 0;\n}\n</code></pre>"},{"location":"Data-aquisition/Mp4/Dev%20notes/Multi-viewport/","title":"Multi viewport","text":"<p>Show additional windows with regular decoration (Windows frame + Close button) and prevent auto merging to the main viewport <pre><code>io.ConfigViewportsNoDecoration = false;\nio.ConfigViewportsNoAutoMerge = true;\n</code></pre> From: https://github.com/ocornut/imgui/issues/3680</p>"},{"location":"Data-aquisition/NI%20DAQMX/Synchronization%20between%20multiple%20USB%20DAQMX%20devices/","title":"Synchronization between multiple USB DAQMX devices","text":"<p>One master device, initiates start trigger and runs sample clock</p> <ul> <li>PFI0 - Start Trigger</li> <li>PFI1 - Sample Clock</li> </ul>"},{"location":"Electronics/Ethernet-IP%20for%20communication%20between%20devices/","title":"Ethernet IP for communication between devices","text":"<p>Critical interfaces between computers and controllers should not be connected through the regular local area network (LAN). These should be connected straight or with a network switch in between.</p>"},{"location":"Electronics/Ethernet-IP%20for%20communication%20between%20devices/#addressing","title":"Addressing","text":"<p>To prevent the devices from operating on a regular LAN we restrict the IP range of our devices to 169.254.0.0/16. This is called a link-local address which is a network address that is valid only for communications on a local link, i.e. within a subnetwork that a host is connected to. </p> <p>Link-local addresses are not guaranteed to be unique beyond their network segment. Therefore, routers do not forward packets with link-local source or destination addresses. Thus effectively isolating the device from the rest of the network in case it were connected to a LAN.</p>"},{"location":"Electronics/Power%20supply%20considerations/","title":"Power supply considerations","text":""},{"location":"Electronics/Power%20supply%20considerations/#capacitor-characteristics","title":"CAPACITOR CHARACTERISTICS","text":""},{"location":"Electronics/Power%20supply%20considerations/#tantalum","title":"TANTALUM","text":"<p>A solid tantalum capacitor is the best choice for the output capacitor on the LM2987/8. Available from many sources, their typical ESR is very close to the ideal value required on the output of many LDO regulators. Tantalums also have good temperature stability: a 4.7 \u03bcF was tested and showed only a 10% decline in capacitance as the temperature was decreased from +125\u00b0C to \u221240\u00b0C. The ESR increased only about 2:1 over the same range of temperature. However, it should be noted that the increasing ESR at lower temperatures present in all tantalums can cause oscillations when marginal quality capacitors are used (where the ESR of the capacitor is near the upper limit of the stability range at room temperature).</p>"},{"location":"Electronics/Power%20supply%20considerations/#ceramic","title":"CERAMIC","text":"<p>The ESR of ceramic capacitor can be low enough to cause an LDO regulator to oscillate: a 2.2 \u03bcF ceramic was measured and found to have an ESR of 15 m\u03a9. If a ceramic capacitor is to be used on the LP2987/8 output, a 1\u03a9 resistor should be placed in series with the capacitor to provide a minimum ESR for the regulator. A disadvantage of ceramic capacitors is that their capacitance varies a lot with temperature: Large ceramic capacitors are typically manufactured with the Z5U temperature characteristic, which results in the capacitance dropping by 50% as the temperature goes from 25\u00b0C to 80\u00b0C. This means you have to buy a capacitor with twice the minimum COUT to assure stable operation up to 80\u00b0C. </p>"},{"location":"Electronics/Power%20supply%20considerations/#aluminum","title":"ALUMINUM","text":"<p>The large physical size of aluminum electrolytics makes them unsuitable for most applications. Their ESR characteristics are also not well suited to the requirements of LDO regulators. The ESR of a typical aluminum electrolytic is higher than a tantalum, and it also varies greatly with temperature. A typical aluminum electrolytic can exhibit an ESR increase of 50X when going from 20\u00b0C to \u221240\u00b0C. Also, some aluminum electrolytics can not be used below \u221225\u00b0C because the electrolyte will freeze.</p> <p>Source: Texas Instruments LP2987, LP2988 technical datasheet</p>"},{"location":"Electronics/product-design-guidelines/D%20sub%20connectors/","title":"D sub connectors","text":"<p>The D-subminiature (D-sub) is a commonly used connector in our lab. They are named after their characteristic D-shaped metal shield.</p>"},{"location":"Electronics/product-design-guidelines/D%20sub%20connectors/#types-and-configurations","title":"Types and configurations","text":"<p>Originally Cannon introduced the series of connectors in 1952 with a part numbering system starting with a D, followed by one of A, B, C, D or E, denoting the shell size. This was followed by the number of pins or sockets and either P (plug) or S (socket) denoting the gender of the part.</p> Type Configuration DA15 15 pin, shell size A DB25 25 pin, shell size B DC37 37 pin, shell size C DD50 50 pin, shell size D DE9 9 pin, shell size E <p>Over the years the type designation has lost it's value a little bit because the naming convention is not always followed. When the DB-25 connector was replaced with a DE-9 for serial communications on personal computers it was often called DB-9 for instance. </p> <p>Manufacturers sometimes also use a number to denote shell-size.  For TE this is 1 for size E and 2 to 5 for shell sizes A up to D.</p>"},{"location":"Electronics/product-design-guidelines/D%20sub%20connectors/#te-connectivity-amplimite-hd-20","title":"TE Connectivity Amplimite HD-20","text":"<p>The HD-20[^1] series from TE is commonly used in our lab. We also have a crimping tool to fabricated connectors with crimped wire leads.</p> <p>[^1]: HD-22 also exists and denotes the high-density variant.</p>"},{"location":"Electronics/product-design-guidelines/D%20sub%20connectors/#panel-mounting","title":"Panel mounting","text":"<p>When designing a panel cutout use the following dimensions:</p> <p>![[d-3.svg|500]]</p> Shell Size (Pos.) Mounting method A C E F K 1 (9) Front 24,99 22,20 13,03 6,53 2,11 1 (9) Rear 24,99 20,47 11,41 5,72 3,35 2 (15) Front 2 (15) Rear 3 (25) Front 3 (25) Rear 4 (37) Front 4 (37) Rear 5 (50) Front 5 (50) Rear <p>Adapted from TE Amplimite Catalog 82068</p>"},{"location":"Electronics/product-design-guidelines/Design%20examples/","title":"Design examples","text":""},{"location":"Electronics/product-design-guidelines/Design%20examples/#electrical-power-entry-iec-c14","title":"Electrical power entry (IEC C14)","text":"<p>A lot of our products are made to connect directly to the 230 V electrical power supply. This way no bulky power adapters are necessary which can get lost. Also we have more control over the quality of the dc voltage by using specifically rated power supplies that have load regulation and the right kind of noise filtering.</p> <p>![[BICM_C14.svg|500]]</p> <p>Schurter makes a really nice series of power entry modules called D11. There are many variants and it's not always clear which one to use. See a few selected models below:</p> Mfg. part nr Description Switch Fuse DD11.0113.1111 Red illumination 10A with cover 2 pole 1 pole 4301.1409 Fuseholder with room for spare fuse - 1 pole <p>Another option, for when no fuse is needed is the DC11.</p> Mfg. part nr Description Switch DC11.0021.001 Red illumination without fuse 2 pole"},{"location":"Hydraulics/Axial%20piston%20variable%20pump/","title":"Axial piston variable pump","text":"<p>In industry it's common for hydraulic systems to be configured to deliver constant flow. Here </p>"},{"location":"Hydraulics/Hydraulics/","title":"Hydraulics","text":"<p>In the lab the main power source for generating force is provided by hydraulics. Throughout the lab multiple pumps and hydraulic ring mains provide hundreds of kilowatts of power to our testing machines.</p>"},{"location":"Hydraulics/Servovalve/","title":"Common Moog servovalve model numbers","text":"<p>A few valves we use in the lab.</p> Model Type Flowrate (l/min) Max press. (bar) Date Comments G761-3013 H20JOGM4VPY 20 315 05-2005 High response G761-3055B S65JOGM4VPY 65 315 03-2015 G761-3055B S65JOGM4PMX 65 315 05-2024 (Source: Moog Servovalves 761 Catalog p.19)"},{"location":"Macrolab/","title":"Index","text":"<p>Welcome to the Macrolab knowledge base. Here you'll find a collection of information pieces, explainers, examples and more regarding technology used in our lab. The focus of this knowledge base is on [[Data-aquisition]] and [[Control systems]], however you will also find information on other related subjects.</p>"},{"location":"Macrolab/#stevin-laboratory","title":"Stevin laboratory","text":"<p>The Macrolab is also known as the Stevin laboratory and is part of the faculty of Civil Engineering and Geosciences at the TU Delft in the Netherlands.</p> <p>At the Stevin laboratory some of the largest scale tests can be conducted in the Netherlands and sometimes the world. Among these exceptional tests it is possible for large scale concrete beams and plates to be tested in 1-, 2- and 3-point bending.</p> <p>Learn more about our faculty: https://www.tudelft.nl/en/ceg</p>"},{"location":"Macrolab/#about","title":"About","text":"<p>This knowledge base is written by technicians working in the lab. The main purpose of this knowledge base is to provide information and references to the way things are done here. Hopefully this information is helpful when designing new testing setups or troubleshooting existing ones.</p>"},{"location":"Macrolab/Force%20direction%20convention/","title":"Force direction convention","text":"<p>When a test-piece experiences a pulling force the force and displacement is considered in the positive direction.</p> <p>If the test-piece experiences a compression force, the force and displacement is considered to be in the negative direction.</p>"},{"location":"Macrolab/Standard%20connector%20pinouts/","title":"DIN Connector","text":"<p>A DIN connector is an electrical connector standardized by the Deutsches Institut f\u00fcr Normung (DIN), the German Institute for Standards, in the mid 1950's. It was originally made for audio equipment but it can be used for all kinds of things.</p> <p>In our lab we often use DIN connectors because they are easily available from our suppliers and they are also quite cheap. They are also made by many different manufacturers.</p> <p>See the image below for the most common contact arrangements for DIN connectors.</p> <p>![[DIN_connector_pinout.svg]]</p>"},{"location":"Macrolab/Standard%20connector%20pinouts/#bicm-connector","title":"BICM connector","text":""},{"location":"Macrolab/Standard%20connector%20pinouts/#laser-displacement-sensor-connectors","title":"Laser displacement sensor connectors","text":""},{"location":"Macrolab/Standard%20connector%20pinouts/#fdrf603-80250-232u-inal","title":"FDRF603-80/250-232/U-IN/AL","text":"<p>Binder 712 Series Connector on sensor body:  09 0427 80 08 Connector on cable: 99 0426 10 08</p> Pin nr Color (8 wire) Color (7 wire) Function Description 1 White White IN 2 Brown Brown GND (power supply) Power supply 3 Green Green TXD RS-232 4 Yellow Yellow RXD RS-232 5 Grey Grey GND (signal) Signal ground 6 Pink AL I/O with different functions 7 Blue Blue U/I Analog voltage/current output ^[The manual reccomends a RC filter on the output] 8 Red Pink Power U+ Power supply <p>DIN Connector side</p> Pin nr Color (8 wire) Color (7 wire) Function 1 Blue Blue U/I 2 Green Green TXD 3 Red Pink Power U+ 4 Yellow Yellow RXD 5 - - - 6 Brown + Grey Brown + Grey GND (power supply) + GND (signal) <p>![[Pasted image 20240620120410.png]]</p>"},{"location":"Macrolab/Standard%20connector%20pinouts/#m12-connectors","title":"M12 connectors","text":"<p>A coded M12 connectors 4 pin</p> Pin Default wire color Default function Loadcell Potmeter Servovalve LVDT 1 Brown V+ (24 V) D V+ A (+) D 2 White Signal 1 E Signal B (-) E 3 Blue V- (GND) G V- C (+) G 4 Black Signal 2 F - D (-) F"},{"location":"Macrolab/Standard%20connector%20pinouts/#servovalve-connector","title":"Servovalve connector","text":"<p>Inside the [[servovalve]] there are two coils. The first coil is connected on pins A (+) and B (-), the second on C (+) and D (-).  ![[Moog-Servo-Valves-wiring.svg|650]]</p> <p>A 4-pin electrical connector that mates with an MS3106F14S-2S is standard. All 4 torque motor leads are available at the connector so that external connections can be made for series, parallel, or differential operation. (Source p. 8)</p>"},{"location":"Macrolab/Standard%20connector%20pinouts/#manifold-connector-vkhkps","title":"Manifold connector (VKHKPS)","text":"<p>VKHKPS stands for low-pressure, high-pressure, pressure-switch (voorklep, hoofdklep, pressure-switch in Dutch). These are the signals that are used to control the [[hydraulic manifold]] blocks in the lab.</p> <p>The connector on the controller side is a 25-pin male D sub with the following pinout (all other pins are not connected).</p> Pin Function (old) Function (new 2024) 1 R1M (VK) R1M (VK) 17 24 V 21 GND GND 22 GND GND 23 GND GND 24 PS (Loop 2)[^1] PS (Loop 2) 25 R2M (HK) R2M (HK) <p>On the manifold side an Amphenol 10-pin circular connector is used.</p> Mgf. p/n Type MS3102A 18-1P 10-pin bulkhead panel mount male MS3106A 18-1S 10-pin cable mount female Pin Function (old) Function (new 2024) oflex chain 819 A VK VK 1 B C HK HK 2 D Spare 1 3 E Shield (optional) F PS PS 4 G H Common GND 5 I Common GND 6 J 24 V PE <p>[^1]: Not every connection box is wired to use the PS. If this is the case, they must be modified.</p>"},{"location":"Macrolab/3D%20Printing/Bambu%20Lab%20X1E%203D%20printer/","title":"Bambu Lab X1E 3D printer","text":""},{"location":"Macrolab/3D%20Printing/Bambu%20Lab%20X1E%203D%20printer/#preferred-filament-types","title":"Preferred filament types","text":"<p>There are many options available for printing filaments. However to keep printer maintenance to a minimum, and to ensure consistent results we like to stick to the following types of filament used in our printers: - Bambu Lab PETG Basic - Bambu Lab PETG-CF - Bambu Lab PLA-CF</p> <p>PETG is really well suited for use in our lab. It is impact and water resistant, slightly flexible and has strong layer adhesion. For mechanically stressed parts that need to be strong the PETG-CF filaments are great. The added carbon fiber increases the stiffness and wear resistance of the parts significantly.</p> <p>PLA-CF is the fastest printing, but still really strong filament. Where normal PLA has the tendency to be brittle and breaks easily on impact. However it's not currently known to us if this material is stable over long term or if it degrades over time.</p> <p>While filaments like ABS and ASA also perform really well mechanically and have good resistance to our lab conditions, the pungent odor and relatively large thermal expansion ratios make them less ideal to print with in our lab.</p> <p>Printing with Bambu Lab filaments is preferred because of the quick and easy integration in the AMS[^1] with the RFID tags that are incorporated in the spools. [^1]: Bambu Lab Automatic Material Switcher</p> <p>Buying filament without the spool holder is preferred to minimize waste. Bambu Lab spools can easily be taken apart and refilled with new filament. The new filament has it's own RFID tag so the AMS will correctly recognize it.</p>"},{"location":"Macrolab/3D%20Printing/Bambu%20Lab%20X1E%203D%20printer/#connecting-to-the-tu-delft-network","title":"Connecting to the TU Delft network","text":"<ol> <li>Request an IP address based on the MAC address of your printer. You can do this with a IT Self Service ticket.</li> <li>Connect the printer to an active network port.</li> <li>Install Bambu Studio on your PC.</li> <li>Add a firewall rule on your PC to allow incoming UDP packets on port 2021.</li> </ol> <p>![[bambu_autodiscovery_firewall_settings.png]]</p>"},{"location":"Macrolab/Digital-Image-Correlation/Sony%20Mirrorless%20Cameras/","title":"Sony Mirrorless Cameras","text":"<p>Remote trigger Sony multiport S2 cable shutter release</p> <p>camera to flash: PC sync with screwlock</p>"},{"location":"Macrolab/EU-standards-and-directives/CE%20Compliance/","title":"CE Compliance","text":"<p>[!QUOTE] CE marking indicates that a product has been assessed by the manufacturer and deemed to meet EU safety, health and environmental protection requirements. It is required for products manufactured anywhere in the world that are then marketed in the EU. (Source: europa.eu)</p>"},{"location":"Macrolab/EU-standards-and-directives/CE%20Compliance/#exclusion-for-internally-used-equipment","title":"Exclusion for internally used equipment","text":"<p>\"Where the equipment has an assembly of linked, powered parts and where at least one of them moves for a specific application, then it will be defined as a machine under the Machinery Directive (2006/42/EC). Actually there are seven categories of equipment in all that are covered by the Machinery Directive and it states that \u201cbefore placing machinery on the market and/or putting it into service, the manufacturer must\u2026 affix the CE marking\u201d (along with all of the other CE marking tasks).\" https://www.cemarkingassociation.co.uk/machinery-built-for-own-use-ce-marking/</p> <p>https://www.blenheim.nl/en/blog/everything-about-the-machinery-directive-200642-machine-safety-and-ce-marking-for-machines-in-the-netherlands/</p>"},{"location":"Macrolab/EU-standards-and-directives/Electrical%20safety/","title":"Electrical safety","text":"<ul> <li>IEC 60204-1, Safety of machinery \u2013 Electrical equipment of machines \u2013 Part 1: General requirements</li> <li>IEC 60335-1 - Safety of electrical appliances for household and similar purposes. Meets the requirements for appliances in unattended use</li> <li>IEC 60601-1 - Medical electrical equipment - Part 1: General requirements for basic safety and essential performance</li> </ul>"},{"location":"Macrolab/EU-standards-and-directives/Hydraulic%20fluid%20power/","title":"Hydraulic fluid power","text":"<ul> <li>ISO 4413, Hydraulic fluid power \u2014 General rules and safety requirements for systems and their components</li> </ul>"},{"location":"Macrolab/EU-standards-and-directives/Safety%20of%20machinery/","title":"Safety of machinery","text":"<p>In order to comply with with the Machinery Directive 2006/42/EC the following standards must be followed when designing a machine.</p> <ul> <li>ISO 13849-1, Safety of machinery \u2014 Safety-related parts of control systems \u2014 Part 1: General principles for design</li> <li>EN-ISO 13850, Safety of machinery - Emergency stop function - Principles for design (Does not apply to machines where an emergency stop would not reduce the risk. E.g. hydraulic machines with suspended a load)</li> <li>IEC 62061, Safety of machinery \u2014 Functional safety of safety-related electrical, electronic and programmable electronic control systems</li> </ul>"},{"location":"Macrolab/EU-standards-and-directives/Safety%20of%20machinery/#emergency-stop-function","title":"Emergency stop function","text":""},{"location":"Macrolab/EU-standards-and-directives/Technical%20documentation/","title":"Technical documentation","text":"<p>According to ISO 12100:2010, drafting information for use is an integral part of the design of a machine. </p>"},{"location":"Macrolab/EU-standards-and-directives/Technical%20documentation/#writing-an-instruction-handbook","title":"Writing an instruction handbook","text":"<p>According to ISO 20607:2019 the content of a handbook shall be structured according to the following example. An instruction handbook for a user/operator doesn't need to contain all of these sections.</p> Section Content Basic parts of an instructionhandbook (see 5.2.1) Title pageTable of contentsIntroduction to/purpose of this instruction handbook Safety (see 5.2.2) General safety information and general safety instructions Machine overview (see 5.2.3) Machine descriptionIntended useKey machine specificationsControls and displays descriptionsFloor plan/layout Transportation, handlingand storage (see 5.2.4) Transporting, handling and storing the machine and/or the components Assembly, installation andcommissioning (see 5.2.5) Assembly/integration of the machinePositioning of the machineMechanical, pneumatic, hydraulic and electrical installationCheck and test of safety systemsInstallation checkCommissioning Original equipment manufacturer settings (see 5.2.6) Mechanical settings and synchronizationSafety-related (setting) parametersPneumatic, hydraulic, electrical and vacuum settingsOther settings Operation (see 5.2.7) Operating modesMachine start-up and shut-downSequence or chronology of operationsOther operating instructions, if applicable Product or capacity changeover (see 5.2.8) General product or capacity changeover informationProduct-specific set-up information Inspection, testing andmaintenance (see 5.2.9) Maintenance instructions Cleaning and sanitizing (see 5.2.10) Cleaning and/or sanitizing of the machine Fault finding/troubleshooting and repair (see 5.2.11) General fault finding/troubleshooting and repair informationTroubleshooting chart (electrical engineering)Troubleshooting of electrical sensors, vacuum systems, pneumatic systems andhydraulic systems Dismantling, disabling andscrapping (see 5.2.12) Dismantling, disabling and scrapping instructions Documents and drawings (see 5.2.13) Documents, drawings and parts list Index, glossary, annexes See 5.2.14 to 5.2.16 <p>Source: ISO 20607:2019 (Safety of machinery - Instruction handbook - General drafting principles). References refer to sections of the standard.</p>"},{"location":"Sensors-and-transducers/","title":"Index","text":"<p>Sensors and transducers are blablabla</p>"},{"location":"Sensors-and-transducers/Accelerometers/","title":"Accelerometers","text":"<p>Accelerometers convert acceleration (rate of change of velocity) into a measurable quantity like a voltage or a digital value. Accelerometers always measure acceleration relative to freefall, this is also called proper acceleration. On earth an accelerometer at rest will indicate approximately 1 g upwards.  \\(\\(1\\;\\text{g}=9,81\\;\\text{m/s}^2\\)\\)</p> <p>There two common types of accelerometers we use in the lab: - MEMS - Piezoelectric</p> <p>MEMS accelerometers are usually very cheap (about 50 euro/piece) and can be used disposably. Commonly used models can be found in the table below.</p> Name Range Output Note ADXL335 \u00b1 3 g Tri-axial, analog ADXL326 \u00b1 16 g Tri-axial, analog ADXL354B \u00b1 2 g, \u00b1 4 g Tri-axial, analog Range selectable with pin ~~ADXL377~~ \u00b1 200 g Tri-axial, analog EOL, no longer produced^[No longer produced https://www.analog.com/en/products/adxl377.html] <p>From these types we usually buy development boards made by Adafruit because they contain a voltage regulator and output filtering capacitors. This makes it easy to use the accelerometers however care should be taken when using long cables (\\(l&gt;10\\;\\text{m}\\)). The high output impedance (32 k\u03a9) means the accelerometer output signal will be degraded.</p> <p>Piezoelectric accelerometers resist shock loading much better than MEMS types. They are also better suited for high frequency measurements. However their sensitivity doesn't reach all the way to 0 Hz. Below are a few types we have experience with:</p> Name Range Output Note 830M1-0200 \u00b1 200 g Tri-axial, analog Intenal amplifier, output is \u00b1 1,25 V full scale 3038-2000 \u00b1 2000 g Uni-axial, bridge Needs an instrumentation amplifier and offset adjust circuitry <p>Piezoelectric accelerometers are more expensive but often come with a calibration report and can be considered more reliable.</p>"},{"location":"Sensors-and-transducers/Accelerometers/#vibration-resistant-mounting","title":"Vibration resistant mounting","text":""},{"location":"Sensors-and-transducers/Displacement%20transducers/","title":"Displacement transducers","text":""},{"location":"Sensors-and-transducers/Displacement%20transducers/#dial-indicator","title":"Dial indicator","text":""},{"location":"Sensors-and-transducers/Displacement%20transducers/#lvdt","title":"LVDT","text":""},{"location":"Sensors-and-transducers/Displacement%20transducers/#potentiometer","title":"Potentiometer","text":""},{"location":"Sensors-and-transducers/Displacement%20transducers/#magnetostrictive","title":"Magnetostrictive","text":""},{"location":"Sensors-and-transducers/Force%20transducers/","title":"Force transducers","text":"<p>Load cells based on [[strain gauges]] are commonly used to measure force in both static and dynamic testing setups. Force is measured indirectly because strain gauges measure local deformation of the base material of the load cell. A conversion factor is used to convert strain into force.</p>"},{"location":"Sensors-and-transducers/Geophones/","title":"Geophones","text":"<p>Geophones measure velocity in m/s.</p> <p>Geophones are sensitive to misalignment. Tilt can cause the frequency response to become out of spec.</p>"},{"location":"Sensors-and-transducers/Strain%20gauges/","title":"Strain gauges","text":""},{"location":"Sensors-and-transducers/Strain%20gauges/#theory","title":"Theory","text":"<p>Strain is a physical property describing the geometrical deformation caused by applying an external stress to a body. Strain is unitless but strain values are denoted with the Greek letter epsilon \\(\\upepsilon\\)  or more commonly with \\(\\upmu\\upepsilon\\)^[Sometimes you'll see a strain value denoted with $\\text{Str} $ or \\(\\micro\\text{Str}\\)], when talking about microstrain. For example:  \\(2000\\;\\upmu\\upepsilon\\).</p> \\[\\epsilon = \\frac{\\Delta l}{l_0}\\] <p>Strain gauges are in essence precise electrical resistors which are sensitive to elongation. This sensitivity comes from the stretching of the conductor causing a decrease in its cross sectional area and thus a slight increase in it's resistance.</p> <p>Example</p> <p>A commonly used strain gauge is the FLAB-6-11 from TML ![[FLAB-6-11.svg|300]]</p> <p>There are also stacked strain gauges available that are sensitive in three directions. These are called rosettes and a common type is the FRAB-6-11 from TML: ![[FRAB-6-11.svg|300]]</p> <p>This relationship is as follows, where \\(K\\) is constant given by the manufacturer of the strain gauge:</p> \\[ \\epsilon \\cdot K = \\frac{\\Delta R}{R} \\quad\\Rightarrow\\quad \\epsilon=\\frac{\\Delta R}{R\\cdot K} \\]"},{"location":"Sensors-and-transducers/Strain%20gauges/#measuring-force","title":"Measuring force","text":"<p>Force acting on an object generates stress within the object. This amount of stress is determined by the surface area the force is acting upon.</p> \\[ \\sigma =\\frac{F}{A} \\] <p>The relationship between stress and strain is based on a material property called the modulus of elasticity (Young's modulus). This relationship is only valid in the linear elastic region of a material.</p> \\[ \\epsilon=\\sigma\\cdot E \\] <p>The modulus of elasticity of steel is about 200 GPa, aluminum 69 GPa and concrete 30 GPa.</p> <p>Example</p> <p>Strain in a steel cilinder as a result of an applied tension force \\(F=100\\;\\text{kN}\\). With a diameter of \\(d=20\\;\\text{mm}\\).</p> \\[ \\begin{align} A &amp;= \\pi\\cdot d^2\\\\ &amp;= \\pi\\cdot 400\\\\ \\end{align} \\] \\[ \\begin{align} \\epsilon &amp;= \\frac{F}{A\\cdot E}\\\\ &amp;= \\frac{100\\cdot10^3}{\\pi\\cdot400\\cdot200\\cdot10^3}\\\\ &amp;\\approx 378 \\;\\upmu\\upepsilon \\end{align} \\]"},{"location":"Sensors-and-transducers/Strain%20gauges/#gauge-factor","title":"Gauge factor","text":"<p>The gauge factor \\(K\\) gives the relationship between the change of electrical resistance and the strain acting on the strain gauge. It is defined as follows:</p> \\[ K = \\frac{\\Delta R/R_0}{\\epsilon} \\] <p>The gauge factor is dependent on the geometric shape of the conductor of the strain gauge, but its also influenced by it's piezoresistive effect. For common thin-film metal strain gauges (like the FLAB-6-11 from TML) this accounts for 20% of the gauge factor. The full definition for the gauge factor is as follows:</p> \\[ K = \\frac{\\Delta R/R_0}{\\Delta l/l_0} = \\frac{\\Delta R/R_0}{\\epsilon} = 1 + 2 \\nu + \\frac{\\Delta \\rho/\\rho_0}{\\epsilon} \\] <p>Some gauge factors for common strain gauge materials can be seen in the table below.</p> Material Gauge factor Metal foil strain gauge 2 to 5 Thin-film metal (e.g. constantan) 2 Single crystal silicon -125 to 200 Polysilicon \u00b130 Thick-film resistors 100 p-type Germanium 102"},{"location":"Sensors-and-transducers/Strain%20gauges/#converting-mvv-to-strain","title":"Converting mV/V to strain","text":"<p>The mV/V value is the output voltage when a maximum load is applied to a transducer. It shows the output voltage generated when 1V excitation is applied.</p> <p>For a lot of load cells the sensitivity is specified in \\(\\text{mV}/\\text{V}\\). In order to obtain the conversion factor </p> \\[ \\epsilon = \\frac{4}{K}\\cdot\\frac{U_o}{U_s}\\cdot G \\] <p>Example</p> <p>A load cell has a sensitivity \\(S = 2.0\\;\\text{mV}/\\text{V}\\) and a rated capacity \\(M_{max} = 1000\\;\\text{kg}\\).  The excitation voltage \\(U_s = 6\\;\\text{V}\\), therefore the full scale output of the load cell is \\(2\\cdot6 = 12\\;\\text{mV}\\) If you have an amplifier with \\(G=1000\\) the output voltage of the amplified signal at full scale is </p> \\[ 12\\cdot10^{-3}\\cdot1000=12 \\;\\text{V} \\] <p>Now the conversion factor \\(C\\) in the data-aquisition system is</p> \\[ C=\\frac{1000\\cdot9.81}{12} = 817,5\\;\\text{N}/\\text{V} \\]"},{"location":"Sensors-and-transducers/Strain%20gauges/#converting-voltage-to-strain","title":"Converting voltage to strain","text":"<p>To calculate the conversion factor it's important to know the gauge factor \\(K\\), the bridge configuration, the excitation voltage \\(U_s\\) and the amplifier gain \\(G\\).</p> <p>For a 1/4 bridge (1 active gauge and 3 dummy resistors) the relationship between the output voltage and the strain is defined as: $$ \\epsilon = \\frac{4}{K}\\cdot\\frac{U_o}{U_s}\\cdot G $$ The conversion factor \\(C\\) can be defined as: $$ C= [\\upmu\\upepsilon/\\text{V}] $$</p> <p>Example</p> <p>A single strain gauge with a gauge factor \\(K=2.08\\), 1/4 bridge, and excitation voltage \\(U_s=6 \\text{v}\\), and an amplifier gain \\(G=1000\\). $$ \\epsilon = \\frac{4}{2.08}\\cdot\\frac{U_o}{6}\\cdot 1000 $$</p>"},{"location":"Sensors-and-transducers/Strain%20gauges/#adding-strain-with-a-resistor","title":"Adding strain with a resistor","text":"<p>You can test a Wheatstone bridge by adding a resistor in parallel with a strain gauge. This will give the same effect as strain applied to the gauge.</p> <p>Adding 56 k\u03a9 in parallel with 120 \u03a9</p> k \\(\\upmu\\upepsilon\\) 2.00 1069 2.11 1013 2.12 1008 2.13 1003 2.14 999"},{"location":"Sensors-and-transducers/Strain%20gauges/#bridge-completion","title":"Bridge completion","text":"<p>Use 1206 SMD resistors, they are less sensitive to mechanical strain. Make sure the temperature coefficient is lower than \u00b1 25ppm/\u00b0C. This is a common value for \u00b1 0.1% tolerance resistors.</p> <p>For example \u00b1 100ppm/\u00b0C 120 \u03a9 resistors can change about 12 m\u03a9 (50 \u00b5\u03b5) per degree Celsius. Which is way too much for most strain measurements.</p> Manufacturer Part nr. Resistance Temperature coefficient Panasonic ERA8AEB121V 120 \u00b1 0.1% \u03a9 \u00b1 25ppm/\u00b0C"},{"location":"Sensors-and-transducers/Strain%20gauges/#definitions","title":"Definitions","text":"\\[ \\begin{align} \\upepsilon&amp;:\\text{strain unit}\\\\ \\sigma &amp;: \\text{stress }&amp;[\\text{N}/\\text{mm}^2 = \\text{MPa}]\\\\ \\nu &amp;: \\text{Poisson's ratio} \\\\ A &amp;: \\text{area}&amp;[\\text{mm}^2]\\\\ E &amp;: \\text{modulus of elasticity} &amp; [\\text{N}/\\text{mm}^2 = \\text{MPa}]\\\\ F &amp;: \\text{force} &amp; [\\text{N}]\\\\ R &amp;: \\text{resistance} &amp; [\\Omega]\\\\ \\rho &amp;: \\text{specific electrical resistance} &amp; [\\Omega \\text{m}]\\\\ K &amp;: \\text{gauge factor}\\\\ l &amp;: \\text{length} &amp; [\\text{m}]\\\\ l_0 &amp;: \\text{initial length} &amp; [\\text{m}]\\\\ \\upmu\\upepsilon &amp;: \\text{notation of units of microstrain} \\end{align} \\]"}]}